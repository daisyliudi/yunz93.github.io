---
title: 设计模式初涉三-工厂模式
date: 2016-12-20 22:41:11
tags: 工厂模式
categories: 设计模式
---

前面两篇设计模式写的不清晰，感觉还是欠实战，需要整个项目做一做。

好吧，开始今天这篇，讲第二个创建者模式——工厂模式。

前些天室友面阿里的实习生，被问到了这个，回答的不怎么好。希望我这篇文章能说明白。

<!-- more -->

## 工厂模式

工厂模式，顾名思义，就是工厂的模式。

工厂是做什么的？生产产品的。

工厂是如何生产产品的？这就是工厂的生产模式。

工厂模式类似于工厂的生产模式。

工厂模式的原话是：

> Define an interface for creating an object, but let subclasses decide which class to instantiate.
>
> Factory Method lets a class defer instantiation to subclasses.
>
> 定义一个用于创建对象的接口，让子类决定实例化哪个类。
>
> 工厂方法使一个类的实例化延迟到其子类。

怎么理解呢？举个通俗的例子。

奥迪是个汽车厂商，它旗下有奥迪A6、A8等多款车型，但它并不生产具体的汽车，它是一个品牌，也就是一个接口。奥迪在中国有子类，例如上海奥迪、北京奥迪，它们负责实际制造A6、A8等车辆，也就是说车辆的实体化被延迟到了奥迪的子类中实现。

这个模式中，奥迪厂家是个抽象工厂，上海奥迪和背景奥迪是具体工厂，奥迪车是抽象产品，奥迪A6、A8则是具体产品。

这就是工厂模式。



工厂模式可分为：

- 简单工厂
- 工厂方法
- 抽象工厂

如何理解这三种模式的区别呢？见下图。

![工厂模式](/设计模式初涉三-工厂模式/工厂模式.png)

是不是很容易理解了？

### 简单工厂模式

一个工厂类处于对产品实例化的中心位置，没有抽象工厂，直接就是奥迪直接上手生产汽车，这样确实好的，奥迪亲自负责每一个产品的生产，质量有保障==。

但它能生产A6、A8，但是出到A9的话，它就得升级自己场内设施，修改工厂类。奥迪表示好累，其实我本来只要提供设计图纸的就好了嘛！干嘛亲力亲为？

简单工厂对“开闭原则”的支持力度不够。



### 工厂方法模式

是简单工厂模式的升级版，把工厂给抽象出来。奥迪说我干不动了，我要找个生产汽车的厂子来给我生产奥迪汽车，我只提供设计图纸（接口）。

好了，2017年要推出新车型A10了，奥迪在自己总部把方案一设计，上海奥迪制造厂你直接按图纸来做就可以了。



好了，开始干活了。

```java
// 奥迪：我来提供图纸
public interface AudiFactory {
  public Audi createCar();
}

// audi 抽象类
public interface Audi {
  public void carSpeed();
  public void carPrice();
  public void carColor();
}

// 奥迪上海制造厂: 奥迪大佬我来干活了
public class AudiShanghaiFactory implements AudiFactory {
  @Override
  public Audi createCar() {
    return new AudiA8();   // 我生产了一辆A8，666
  }
}

// A8：我价格最高，颜色最美，速度最快
public class AudiA8() implements Audi{
  public AudiA8() {
    this.carColor();
    this.carSpeed();
    this.carPrice();
  }
  @Override
  public void carSpeed() {
  	System.out.println("A8 速度 180");
  }
  public void carPrice(){
  	System.out.println("A8 价格 100万");
  }
  public void carColor(){
  	System.out.println("A8 颜色 黑");
  }
}
```

怎么样？很好理解吧！



### 抽象工厂模式

抽象工厂模式又是工厂方法模式的升级版，既然大家的工厂都抽象了，那我得在种类上盖过你啊。

工厂方法模式针对的是一个产品等级结构，抽象工厂模式则需要面对多个产品等级结构。

怎么理解呢？

工厂方法模式中，奥迪只提供了汽车生产图纸，上海奥迪制造厂根据图纸造出了A8，北京奥迪制造厂造出了B8。

而抽象工厂模式中，奥迪不止提供了汽车生产图纸，还提供了卡车，卡丁车的生产图纸，上海奥迪制造厂不仅生产了A8，还生产了卡丁车A7，卡车A9，北京奥迪制造厂不仅生产了B8，还生产了卡丁车B7，卡车B9。

其实《Java设计模式》中的例子更易理解。Dota2游戏中，天辉军团可以召唤力量型英雄，敏捷型英雄，智力型英雄，夜魇军团也可以，但双方的各型英雄角色又各不相同。

英雄制造厂是个抽象工厂，它提供了三种英雄的抽象产品的设计图纸，天辉军团和夜魇军团作为两个具体工厂，可以根据三种抽象产品生产出不同的英雄（具体产品）。

这种解释是不是棒呆！

代码就不贴了，工厂方法模式的代码改一下就可以了。



原创博文，转载注明来源